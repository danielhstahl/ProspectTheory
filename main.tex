\documentclass{article}
\usepackage{amsmath}
\usepackage{fancyhdr}
\usepackage{amsthm}
\usepackage{caption}
\usepackage{amsfonts}
\usepackage{graphicx}
\usepackage{cite}
\usepackage{float}
\setlength{\parindent}{0cm}
\newtheorem{theorem}{Theorem}
\newtheorem{corollary}{Corollary}
\DeclareMathOperator{\diag}{diag}
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\begin{document}
	
	
\title{Unified Framework of Rational Agents}
\date{}
\author{Daniel H. Stahl}

\section{Introduction}

The von Nuemann-Morgenstern theorem provides theoretical justification for the use of expected utility as a framework for analyzing decisions under uncertainty.  The axioms underlying the theorem have come under some scrutiny.  In psychology, Daniel Kahneman and Amos Tversky have introduced alternative representations of choice under uncertainty.  Kahneman and Tversky openly question expected utility in their papers (Kahneman and Tversky 1992).  Their primary objection is to the appropriateness of the independence axiom from the von Nuemann-Morgenstern proof.    
\\
\\
In this paper, I prove the existence of an expectation representation of preferences without requiring the independence assumption of von Nuemann and Morgenstern.  I show that a measure exists such that preferences which violate the independence axiom can still be represented by an expectation.  I give a practical example of this proof by showing that preferences consistent with Allais' paradox can be represented by expectations.  The conclusion is that economic insights generated by expected utility theory can remain valid despite Kahneman's and Tversky's objections.   

\section{The von Nuemann-Morgenstern Axioms}

Let \(X\) represent the consumption set available to economic agents.  A bundle \(x \in X\) is a set of consumption options within \(X\).  A gamble \(\sigma\) is a random variable that chooses (potentially) different consumption bundles within \(X\) for various states of the world.  In the language of probability theory, \(\sigma: \Omega \to X\).  I allow gambles to also exist in the consumption set, allowing me to state that \(\sigma \in X\).  Unless otherwise stated, I denote ``deterministic'' consumption bundles as \(x_i \in X\) while I denote gambles as \(\sigma_i \in X\).     
\\
\\
The von Nuemann-Morgenstern theorem states that given a set of axioms, there exists a function \(u: X \to \mathbf{R}\) such that for all \(\sigma_1, \sigma_2 \in X\), \(\mathbb{E}\left[u(\sigma_1)\right] \geq \mathbb{E}\left[u(\sigma_2)\right]\) if and only if \(\sigma_1 \succeq  \sigma_2\).  These axioms are:

\begin{enumerate}
	\item \textbf{Completeness}.  \(\forall x_1, \, x_2 \in X\), either \(x_1 \succeq  x_2\), \(x_2 \succeq  x_1\), or both.
	\item \textbf{Transitivity}.  \(\forall x_1, \, x_2,\, x_3 \in X\), if \(x_1 \succeq  x_2\) and \(x_2 \succeq  x_3\), then \(x_1 \succeq  x_3\).
	\item \textbf{Continuity}.  \(\forall x_1, \, x_2,\,x_3 \in X\) satisfying \(x_1 \succeq  x_2 \succeq  x_3\), there exists \(\alpha \in [0,\,1]\) such that \(\alpha x_1+(1-\alpha) x_3 \sim x_2\).
	\item \textbf{Independence}.  \(\forall x_1, \, x_2,\,x_3 \in X\) and \(\alpha \in [0,\,1]\), \(x_1 \succeq  x_2 \Leftrightarrow \alpha x_1+(1-\alpha)x_3 \succeq  \alpha x_2 +(1-\alpha)x_3\)
\end{enumerate}

Only the first two axioms are required for rationality.  The third is required to ensure the existence of a utility function.  The last is required to ensure that preferences in an uncertain world can be represented by taking expectations.  Humans may be rational even if no utility function exists.  
\\
\\
This theorem is powerful: it provides theoretical justification for using the mathematical language of expected utility as a toolkit for explaining human preferences and behavior.  However, the proof relies heavily on all four axioms.  If one of the axioms is shown to be false, the proof fails.  
\\
\\
It is important to clarify what the failure of the proof means for expected utility theory. The proof is constructive, demonstrating how a utility function can be created.  The construction relies on all four axioms.  However, utility functions may still exist if the third and fourth axioms are relaxed, they simply cannot be constructed in the same way as in the theorem.  In other words, if the independence axiom is not valid, expected utility under the real-world measure \emph{may} still represent preferences, but it is not \emph{guaranteed} to do so.  
 

\section{The Allais Paradox} 

In 1953, Allais proposed the following two sets of choices of gambles:

\subsubsection{Choice 1}

\begin{equation*}
\left\{
\begin{array}{rl}
1\text{M} & \text{with probability } 1
\end{array} \right.
\end{equation*}

OR

\begin{equation*}
\left\{
\begin{array}{rl}
0 & \text{with probability } 0.01,
\\1\text{M} & \text{with probability } 0.89,
\\5\text{M} & \text{with probability } 0.1.
\end{array} \right.
\end{equation*}

\subsubsection{Choice 2}

\begin{equation*}
\left\{
\begin{array}{rl}
\\0\text{M} & \text{with probability } 0.89,
\\1\text{M} & \text{with probability } 0.11.
\end{array} \right.
\end{equation*}

OR

\begin{equation*}
\left\{
\begin{array}{rl}
0 & \text{with probability } 0.9,
\\5\text{M} & \text{with probability } 0.1.
\end{array} \right.
\end{equation*}

If the von Nuemann-Morgenstern theorem holds (using both the existence of a utility function and the independence axiom), the second choice can be decomposed as 
\begin{align*}
0.89u(0)+0.11u(1)\, &|\, 0.9u(0)+0.1u(5) \\
\Leftrightarrow u(1)-0.89u(1) \, &|\, 0.01u(0)+0.1u(5) \\
\Leftrightarrow u(1)-0.89u(1) \, &|\, 0.01u(0)+0.1u(5) \\
\Leftrightarrow u(1) \, &|\, 0.01u(0)+0.1u(5)+0.89u(1)
\end{align*}

This final statement is simply the utility of the first choice.  Hence if an agent chooses option one in choice one, he or she should choose option one in choice two.  Likewise, if the agent prefers option two in choice one, he or she should choose option two in choice two.
\\
\\
In reality, many people would prefer the first option for choice one and the second option for choice two.  Even the remote possibility of missing out on 1 million dollars is too big a gamble. 
\\
\\
Allais's paradox as well as subsequent empirical work by Kahneman and Tversky provides substantial evidence that the independence axiom may not be appropriate in many situations.  For the remainder of this paper the independence axiom is dropped.  

 
\section{Existence of Utility Function and Probability Measure}

\begin{theorem} \label{theorem1}
Assume the first three axioms, which implies the existence of an (ordinal) utility function \(g\) representing preferences such that \(g(x_1)\geq g(x_2) \Leftrightarrow x_1 \succeq x_2 \).  Assume a probability space which contains the outcomes of all relevant gambles. Then there exists a function \(u: X \to \mathbb{R}\) and a probability measure \(\mathbb{Q}\) equivalent to the ``physical'' measure \(\mathbb{P}\) such that \(\mathbb{E}_Q\left[u(\sigma_1)\right] \geq \mathbb{E}_Q\left[u(\sigma_2)\right]\) if and only if \(\sigma_1 \succeq \sigma_2\).  
\end{theorem} 

\begin{proof}
Debreu's Representation Theorem axioms 1, 2, and 3 are sufficient and necessary for the existence of the ordinal utility function \(g\).  I can denote the real-world expectation of the two gambles as \(\mathbb{E}[g(\sigma_1)]\) and \(\mathbb{E}[g(\sigma_2)]\). 

\subsubsection*{Case 1}

If \(\mathbb{E}[g(\sigma_1)]\geq\mathbb{E}[g(\sigma_2)]\) and \(\sigma_1 \succeq \sigma_2\), then \(\mathbb{Q}\) can be chosen to be \(\mathbb{P}\) and \(u(\cdot)\) can be chosen to be \(g(\cdot)\); and the work is done. Note that this will be the case under any measure if the outcome of \(\sigma_2\) is prefered to the outcome of \(\sigma_1\) in all states.

\subsubsection*{Case 2}

The interesting case is when \(\mathbb{E}[g(\sigma_1)]<\mathbb{E}[g(\sigma_2)]\) while \(\sigma_1 \succeq \sigma_2\).  Note that since \(g\) is ordinal I can always choose \(u=a+bg\) such that \(u\) is positive.  This lets me define a new probability measure:

\[\mathbb{Q}(A)=\frac{1}{\alpha}\int_A \frac{u(\sigma_1)}{u^2(\sigma_2)} \frac{dv(\omega) }{ d\mu(\omega)} d\mu(\omega)\] 
Where \(\alpha=\int_\Omega \frac{u(\sigma_1)}{u^2(\sigma_2)} dv(\omega) \), \(\mu\) is the real-world probability measure, and \(v\) is a ``free'' probability measure equivalent to the real-world measure.  Armed with this new measure, we can compute the new expectations:

\[\mathbb{E}_Q[u(\sigma_1)]=\frac{1}{\alpha} \int_\Omega \frac{u^2(\sigma_1)}{u^2(\sigma_2)} dv(\omega)\]
\[\mathbb{E}_Q[u(\sigma_2)]=\frac{1}{\alpha} \int_\Omega \frac{u(\sigma_1)}{u(\sigma_2)} dv(\omega)\]

Since \(\sigma_1\) is prefered to \(\sigma_2\) in at least some states of the world (or else we would be in Case 1), \(v\) can be chosen so that \(\int_\Omega \frac{u(\sigma_1)}{u(\sigma_2)} dv(\omega)\geq 1\).  For example, \(dv\) could simply be \(\mathbb{I}_{u(\sigma_1)>u(\sigma_2)}\).  Then by Jenson's inequality, 
\[\mathbb{E}_Q[u(\sigma_1)] \geq   \mathbb{E}_Q[u(\sigma_2)]^2 \geq  \mathbb{E}_Q[u(\sigma_2)] \implies \mathbb{E}_Q[u(\sigma_1)] \geq \mathbb{E}_Q[u(\sigma_2)] \]

\end{proof}

\begin{corollary}\label{corr1}
	If gambles \(\sigma_3\) and \(\sigma_4\) are independent of gambles \(\sigma_1\) and \(\sigma_2\) under measure \(v\), \(\mathbb{E}[u(\sigma_1)] < \mathbb{E}[u(\sigma_2)]\), and \(\mathbb{E}[u(\sigma_3)] < \mathbb{E}[u(\sigma_4)]\), then under the measure defined as 
	\[\mathbb{Q}(A)=\frac{1}{\alpha}\int_A \frac{u(\sigma_1)u(\sigma_3)}{u^2(\sigma_2)u^2(\sigma_4)} \frac{dv(\omega) }{ d\mu(\omega)} d\mu(\omega)\]
	\(\mathbb{E}_Q[u(\sigma_1)]\geq\mathbb{E}_Q[u(\sigma_2)]\) and \(\mathbb{E}_Q[u(\sigma_3)]\geq\mathbb{E}_Q[u(\sigma_4)]\) where \(\alpha=\int_\Omega \frac{u(\sigma_1)u(\sigma_3)}{u^2(\sigma_2)u^2(\sigma_4)} dv(\omega) \).
\end{corollary}

\begin{proof}
This follows from Theorem \ref{theorem1} and by the fact that \(\mathbb{E}[XY]=\mathbb{E}[X]\mathbb{E}[Y]\) if \(X\) and \(Y\) are independent.  
\end{proof}

\section{Selecting a Probability Measure}

The previous section shows that a measure could be constructed.  This section proposes a method to construct the measure in a discrete setting.

Let there be \(n\) states of the world, with probability of each state given by the vector 
\[p = [p_1, p_2, \dotsc, p_n]\]  
Let there be \(m\) gambles represented by the matrix 
\[\Sigma = \begin{bmatrix}
    \sigma_{11}       & \sigma_{12} & \dots & \sigma_{1n} \\
    \sigma_{21}       & \sigma_{22}  & \dots & \sigma_{2n} \\
    \hdotsfor{4} \\
    \sigma_{m1}       & \sigma_{m2} & \dots & \sigma_{mn}
\end{bmatrix}\]

Permissable gambles implies that the rank of \(\Sigma\) is at most \(n\); that is, if there are more gambles than states in the world then either there are equivalent gambles or there are gambles that are strictly dominated by other gambles and are not relevant for this exercise.  This is a similar argument to the no-arbitrage condition in financial markets.  
\\
\\
It would make sense to identify a measure \(v\) so that \(\mathbb{Q}\) and \(\mathbb{P}\) are ``close'' to each other.  This motivates a constrained least squares problem:


\begin{equation}
\begin{aligned}
\min_v \quad \norm{v-p} \\
\textrm{s.t.}\quad u(\Sigma) v = z\\
v \geq 0
\end{aligned}
\end{equation}

Where \(z\) is the ``actual'' utility and whose ordering of the outcomes under \(\mathbb{Q}\) aligns with the ordering of preferences.  This problem can be solved using Quadratic Programming, and many languages have libraries capable of this optimization. 

\subsection{Examples}

\subsubsection{Allias Paradox choice 1}
Consider the first choice of the Allias Paradox.  The outcomes can be written in matrix form as follows (numbers in millions):

\[X^T=\begin{bmatrix}
	1 & 0  \\
	1 & 1  \\
	1 & 5  \\
\end{bmatrix}\]

Assuming a starting wealth of \(\$100,000\) and a log utility function, the (ordinal) utilities associated with these outcomes are:
\[M^T=\begin{bmatrix}
	13.911 & 11.513  \\
	13.911 & 13.911  \\
	13.911 & 15.445  \\
\end{bmatrix}\]

Since these values are positive, I set \(u=g\).  The expected utility from these two outcomes under the real-world measure is 

\begin{center} 
	\begin{tabular}{c c}
		& Expected Utility under \(\mathbb{P}\) \\
		Choice 1 Option 1 & 13.911 \\
		Choice 1 Option 2 & 14.040 \\
	\end{tabular}
\end{center}

With a quadratic programming solver, a possible \(v\) is chosen as \(v(\omega)=[0.208, 0.735, 0.057]\).

Under this measure, the expected utility for each outcome is 

\begin{center} 
	\begin{tabular}{c c}
		& Expected Utility under \(\mathbb{Q}\) \\
		Choice 1 Option 1 & 13.911 \\
		Choice 1 Option 2 & 13.500 \\
	\end{tabular}
\end{center}

\subsubsection{Allias Paradox all choices}

The outcomes of all four choices can be represented as the following matrix (in millions):

\[X^T=\begin{bmatrix}
1 & 0 & 0 & 0 \\
1 & 1 & 0 & 0 \\
1 & 5 & 0 & 0 \\
1 & 0 & 1 & 0 \\
1 & 1 & 1 & 0 \\
1 & 5 & 1 & 0 \\
1 & 0 & 0 & 5 \\
1 & 1 & 0 & 5 \\
1 & 5 & 0 & 5 \\
1 & 0 & 1 & 5 \\
1 & 1 & 1 & 5 \\
1 & 5 & 1 & 5
\end{bmatrix}\]

Using the same utility function as in the first example,

\[M^T=\begin{bmatrix}
	13.911 & 11.513 & 11.513 & 11.513  \\
	13.911 & 13.911  & 11.513 & 11.513 \\
	13.911 & 15.445 & 11.513 & 11.513 \\
	13.911 & 11.513 & 13.911 & 11.513 \\
	13.911 & 13.911  & 13.911 & 11.513 \\
	13.911 & 15.445  & 13.911 & 11.513 \\
	13.911 & 11.513 & 11.513  & 15.445 \\
	13.911 & 13.911  & 11.513  & 15.445 \\
	13.911 & 15.445  & 11.513  & 15.445 \\
	13.911 & 11.513  & 13.911  & 15.445 \\
	13.911 & 13.911  & 13.911  & 15.445 \\
	13.911 & 15.445  & 13.911  & 15.445 \\
\end{bmatrix}\]


Using corollary \ref{corr1}, a possible \(v\) is chosen as 
\begin{equation*}
\begin{aligned}
v(\omega)=[0.19306, 0.64141, 0.11376, 0.00011, \\ 
0.00011, 0.00011, 0.05089, 0.00011, \\
0.00011, 0.00011, 0.00011, 0.00011]
\end{aligned}
\end{equation*}

Under this measure, the expected utility for each outcome is 

\begin{center} 
	\begin{tabular}{c c}
		& Expected Utility under \(\mathbb{Q}\) \\
		Choice 1 Option 1 & 13.911 \\
		Choice 1 Option 2 & 13.501 \\
		Choice 2 Option 1 & 11.515 \\
		Choice 2 Option 2 & 11.715 \\
	\end{tabular}
\end{center}

This resolves the paradox.  
	
\end{document}
